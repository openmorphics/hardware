using sysbus
mach create "snn_system"

machine LoadPlatformDescription @platforms/cpus/riscv64.repl

# Add our custom accelerator peripheral
sysbus Redirect 0x40000000 0x1000 sysbus.snn_accelerator

# Create the accelerator
python "exec(open('accelerator.py').read())"
machine PyDevFromFile @accelerator.py 0x40000000 0x1000 True "snn_accelerator"

showAnalyzer sysbus.uart0
